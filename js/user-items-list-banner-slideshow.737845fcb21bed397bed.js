"use strict";(globalThis.webpackChunknew_bedford_framework=globalThis.webpackChunknew_bedford_framework||[]).push([[3002],{39248:(e,t,i)=>{i.r(t),i.d(t,{UserItemsListBannerSlideshow:()=>g,default:()=>b});var s=i(67373),o=i(9330),r=i(29762),n=i(28058),l=i(68651),a=i(75396),h=i(63285),d=i(79287),c=i(28408);function u(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=0;const m=0,S="px",w=576,v=e=>{let{spaceValue:t,spaceUnit:i}=e;return window.innerWidth<w&&(t=m,i=S),{value:t,unit:i}};class g extends s.A{constructor(e){super(),u(this,"getStateFromDOM",(()=>{const e=JSON.parse(this.node.dataset.currentContext),t=Object.assign({},e);return t.userItems.forEach(((e,t)=>{e.image&&(e.imageId=e.image.id,delete e.image)})),t})),u(this,"updateRef",(()=>{const{itemSelector:e,contentSelector:t,unorderedListSelector:i,imageSelector:s,itemTitleSelector:o,itemDescriptionSelector:r,itemButtonSelector:n,arrowLeftWrapperSelector:l,arrowRightWrapperSelector:a,arrowsBottomWrapperSelector:h,parentSectionSelector:d,listWrapperSelector:c,listTitleSelector:u,listButtonWrapperSelector:p,listButtonSelector:m,listTitleSpacerSelector:S,listButtonSpacerSelector:w}=this.props;return{layoutContainer:this.node,unorderedList:this.node.querySelector(i),images:Array.from(this.node.querySelectorAll(s)),userItems:Array.from(this.node.querySelectorAll(e)),userItemsContent:Array.from(this.node.querySelectorAll(t)),itemTitles:Array.from(this.node.querySelectorAll(o)),itemDescriptions:Array.from(this.node.querySelectorAll(r)),itemButtons:Array.from(this.node.querySelectorAll(n)),arrowLeftWrapper:this.node.querySelector(l),arrowRightWrapper:this.node.querySelector(a),arrowsBottomWrapper:this.node.querySelector(h),parentNode:this.node.closest(d),listWrapperElement:this.node.closest(c),listTitleElement:this.node.parentElement.querySelector(u),listButtonWrapper:this.node.parentElement.querySelector(p),listButtonElement:this.node.parentElement.querySelector(m),listTitleSpacerElement:this.node.parentElement.querySelector(S),listButtonSpacerElement:this.node.parentElement.querySelector(w)}})),u(this,"handleArrowVisibility",(()=>{if(!this.isInfiniteEnabled&&"arrows"===this.navigationControls){if(this.slideshowProps.totalSlideCount<=this.getSlideColumnCount())return this.hideArrow(this.previousBtn),void this.hideArrow(this.nextBtn);this.slideshowProps.targetSlideIndex<=0?this.hideArrow(this.previousBtn):this.showArrow(this.previousBtn),this.slideshowProps.targetSlideIndex>=this.behaviors.getLastScrollableSlideIndex()?this.hideArrow(this.nextBtn):this.showArrow(this.nextBtn)}})),u(this,"onResize",(()=>{const e=this.getSlideColumnCount();this.removeClones(),this.slideshowNodes=this.buildItems(this.slides),this.list.props.items=this.slideshowNodes,this.list.props.slideshowGutterWidth=this.getSlideshowGutterWidth(),this.list.props.slideColumnCount=e,this.behaviors&&(this.behaviors.props.slideColumnCount=e),this.list.props.spacing=v({spaceValue:this.node.dataset.spaceBetweenSlidesValue,spaceUnit:this.node.dataset.spaceBetweenSlidesUnit}),this.list.setSize(this.getSlideshowDimensions()),this.updatePositions(),this.slideshowProps.targetSlideIndex=this.slideshowProps.progressIndex,this.handleArrowVisibility()})),u(this,"removeClones",(()=>{this.slidesContainer.innerHTML="";const e=new DocumentFragment;this.slides.forEach((t=>{e.appendChild(t)})),this.slidesContainer.appendChild(e)})),u(this,"onClickNavPrevious",(()=>{this.behaviors.previousIndex()})),u(this,"onClickNavNext",(()=>{this.behaviors.nextIndex()})),u(this,"onProgress",(e=>{this.slideshowProps.progressIndex=(.5+e|0)%this.slideshowProps.totalSlideCount,this.list.setProgress(e),this.updatePositions()})),u(this,"onStartProgress",(e=>{if(this.slideshowProps.targetSlideIndex=e,this.handleArrowVisibility(),!this.dragBehaviors.isDragging){const t=this.slideshowNodes.length,i=Math.round((e+t)%t);this.updateAriaContainer({currentSlideIndex:i})}})),u(this,"onCloneItem",(e=>{const t=this.slideshowNodes[e],i=t.node.parentNode,s=t.node.cloneNode(!0);s.querySelectorAll("h1, h2, h3, h4, h5, p, [data-animation-role]").forEach((e=>{(0,d.x)(e),e.classList.remove(c.g)}));const o=s.querySelector(this.nodeSelectors.slideshowItemImage);i.appendChild(s),this.slideshowNodes.push({...t,node:s,imageNode:o,isImageLoadAdded:!1,inViewport:null})})),this.node=e,this.ref=this.updateRef(),this.isInfiniteEnabled="true"===e.getAttribute("data-is-infinite-enabled"),this.spaceBetweenSlidesValue=Number(e.getAttribute("data-space-between-slides-value")),this.spaceBetweenSlidesUnit=e.getAttribute("data-space-between-slides-unit"),this.maxColumns=1,this.navigationControls=e.getAttribute("data-navigation-controls"),this.nodeSelectors={slideshowWidthConstrainer:".slideshow-gutter",slidesContainer:".slides",slide:".slide",slideshowItemImage:".list-slideshow-image",previousBtn:".user-items-list-banner-slideshow__arrow-button--left",nextBtn:".user-items-list-banner-slideshow__arrow-button--right",previousBtnMobile:".mobile-arrow-button--left",nextBtnMobile:".mobile-arrow-button--right"},this.classNames={isSlideshowInitialized:"slides--initialized",isArrowHidden:"arrow-button--hidden"},this.state=this.getStateFromDOM(),this.initializeSlideshowDom(),this.initializeSlideshowBehaviors(),this.initializeSlideshowProperties(),this.initializeDragBehaviors(),this.initializeSlideshow(),this.behaviors.setIndex(p,{isInstant:!0}),this.destroy=this.destroy.bind(this)}addAriaContainer(e){let{targetElement:t}=e;const i=document.createElement("div");i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),i.setAttribute("style","position: absolute; pointer-events: none; opacity: 0;"),t.appendChild(i),this.ariaContainer=i}updateAriaContainer(e){let{currentSlideIndex:t}=e;const i=this.slideshowNodes.length;this.ariaContainer.innerHTML=`Item ${t+1} of ${i}`}initializeSlideshowDom(){this.slideshowWidthConstrainer=this.node.querySelector(this.nodeSelectors.slideshowWidthConstrainer),this.slidesContainer=this.node.querySelector(this.nodeSelectors.slidesContainer),this.previousBtn=this.node.querySelector(this.nodeSelectors.previousBtn),this.nextBtn=this.node.querySelector(this.nodeSelectors.nextBtn),this.previousBtnMobile=this.node.querySelector(this.nodeSelectors.previousBtnMobile),this.nextBtnMobile=this.node.querySelector(this.nodeSelectors.nextBtnMobile),this.slides=Array.from(this.node.querySelectorAll(this.nodeSelectors.slide)),this.slideshowNodes=this.buildItems(this.slides),this.addAriaContainer({targetElement:this.slideshowWidthConstrainer})}initializeSlideshowBehaviors(){this.behaviors=new o.A({nodes:{focus:this.slideshowWidthConstrainer},numSlides:this.slideshowNodes.length,slideColumnCount:this.getSlideColumnCount(),isAutoplay:!1,autoplayInterval:3e3,isInfinite:this.isInfiniteEnabled,transitionDuration:600,onProgress:this.onProgress,onStartProgress:this.onStartProgress,shouldStopNavAtEnds:!0}),this.list=new n.A({items:this.slideshowNodes,...this.getSlideshowDimensions(),spacing:v({spaceValue:this.spaceBetweenSlidesValue,spaceUnit:this.spaceBetweenSlidesUnit}),isInfinite:this.isInfiniteEnabled,onCloneItem:this.onCloneItem,slideshowGutterWidth:this.getSlideshowGutterWidth()})}initializeSlideshowProperties(){this.slideshowProps={slideDimensions:this.list.props.items[0],totalSlideCount:this.slideshowNodes.length,progress:0,progressIndex:0,targetSlideIndex:0}}initializeDragBehaviors(){const e=this.node.querySelector(this.nodeSelectors.slideshowWidthConstrainer);this.dragBehaviors=new r.A(e,{slideshowProps:this.slideshowProps,behaviors:this.behaviors,callback:this.handleArrowVisibility})}initializeSlideshow(){this.updatePositions(),this.slidesContainer.classList.add(this.classNames.isSlideshowInitialized),this.bindListeners(),this.handleArrowVisibility(),this.updateAriaContainer({currentSlideIndex:0})}hideArrow(e){e&&(e.classList.add(this.classNames.isArrowHidden),e.setAttribute("tabindex","-1"),e.setAttribute("data-override-initial-global-animation",""))}showArrow(e){e&&(e.classList.remove(this.classNames.isArrowHidden),e.setAttribute("tabindex","0"),e.removeAttribute("data-override-initial-global-animation"))}getSlideColumnCount(){const e=window.innerWidth;let t=1;return Object.values({"breakpoint-up-sm":{minScreenWidth:576,columnsWeHaveRoomFor:2},"breakpoint-up-lg":{minScreenWidth:992,columnsWeHaveRoomFor:3},"breakpoint-up-xxl":{minScreenWidth:1200,columnsWeHaveRoomFor:4}}).forEach((i=>{e>=i.minScreenWidth&&(t=Math.min(i.columnsWeHaveRoomFor,this.maxColumns))})),t}getSlideshowGutterWidth(){const e=this.slidesContainer.getBoundingClientRect();return this.slidesContainer.offsetWidth/e.width*(e.x-this.slideshowWidthConstrainer.getBoundingClientRect().x)}bindListeners(){var e,t,i,s;"none"!==this.state.options.navigationControls&&(null===(i=this.previousBtn)||void 0===i||i.addEventListener("click",this.onClickNavPrevious),null===(s=this.nextBtn)||void 0===s||s.addEventListener("click",this.onClickNavNext));null===(e=this.previousBtnMobile)||void 0===e||e.addEventListener("click",this.onClickNavPrevious),null===(t=this.nextBtnMobile)||void 0===t||t.addEventListener("click",this.onClickNavNext),this.onResize=(0,a.A)(this.onResize,h.X0),l.A.on(this.onResize)}unbindListeners(){var e,t,i,s;"none"!==this.state.options.navigationControls&&(null===(i=this.previousBtn)||void 0===i||i.removeEventListener("click",this.onClickNavPrevious),null===(s=this.nextBtn)||void 0===s||s.removeEventListener("click",this.onClickNavNext));null===(e=this.previousBtnMobile)||void 0===e||e.removeEventListener("click",this.onClickNavPrevious),null===(t=this.nextBtnMobile)||void 0===t||t.removeEventListener("click",this.onClickNavNext),l.A.off(this.onResize)}getSlideshowDimensions(){const e=this.slideshowWidthConstrainer.offsetWidth,t=this.slideshowWidthConstrainer.offsetHeight;return{regionWidth:e,regionHeight:t,maxWidth:e,maxHeight:t}}setItemIndex(e){for(let t=0;t<e.length;t++)if(e[t].length){p!==t&&(p=t,this.behaviors.setIndex(p))}}buildItems(e){return e.map(((e,t)=>({width:e.offsetWidth,height:e.offsetHeight,index:t,node:e,imageNode:e.querySelector(this.nodeSelectors.slideshowItemImage),isImageLoadAdded:!1,inViewport:null})))}updatePositions(){for(let e=0,t=this.slideshowNodes.length;e<t;e+=1){const t=this.slideshowNodes[e],i=this.list.items[e],s=!!(.5+Math.min(1,Math.abs(i.proximity))|0),o=t.inViewport!==i.inViewport;s?t.node.setAttribute("aria-hidden",!0):t.node.removeAttribute("aria-hidden"),(t.inViewport||o)&&(t.node.style.transform="translate3d("+i.x+"px, 0, 0)",t.inViewport=i.inViewport)}}destroy(){this.behaviors&&(this.behaviors.destroy(),delete this.behaviors),this.dragBehaviors&&(this.dragBehaviors.destroy(),delete this.dragBehaviors),this.unbindListeners()}}u(g,"defaultProps",{unorderedListSelector:".slides",itemSelector:".slide",imageSelector:"img",contentSelector:".slide-content",mediaSelector:".slide-media-container",itemTitleSelector:".list-item-content__title",itemDescriptionSelector:".list-item-content__description",itemButtonSelector:".list-item-content__button",itemButtonContainerSelector:".list-item-content__button-container",arrowLeftWrapperSelector:".arrow-container--left",arrowRightWrapperSelector:".arrow-container--right",arrowsBottomWrapperSelector:".arrows-bottom-wrapper",parentSectionSelector:".user-items-list-section",listWrapperSelector:".user-items-list",hideElementClass:"list-item-content--hidden",listTitleSelector:".list-section-title",listButtonWrapperSelector:".list-section-button-container",listButtonSelector:".list-section-button",listTitleSpacerSelector:".section-title-vertical-padding-spacer",listButtonSpacerSelector:".section-button-vertical-padding-spacer"});const b=e=>new g(e)}}]);